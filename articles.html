<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Articles - Through the Cracks</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Latest Articles</h1>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="articles.html">Articles</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section>
        <h2>From <a href="https://time-to-listen.com/" target="_blank">Time to Listen</a></h2>
        <ul id="blog-posts">Loading articles...</ul>
    </section>

    <script>
      async function fetchBlogPosts() {
        try {
          const response = await fetch('https://time-to-listen.com/feed/');
          const text = await response.text();
          const parser = new DOMParser();
          const xml = parser.parseFromString(text, 'text/xml');
          const items = xml.querySelectorAll('item');
          
          let html = '';
          items.forEach((item, index) => {
            if (index < 5) { // Display only 5 latest articles
              const title = item.querySelector('title').textContent;
              const link = item.querySelector('link').textContent;
              html += `<li><a href="${link}" target="_blank">${title}</a></li>`;
            }
          });

          document.getElementById('blog-posts').innerHTML = html;
        } catch (error) {
          document.getElementById('blog-posts').innerHTML = "<p>Failed to load articles.</p>";
        }
      }

      fetchBlogPosts();
    </script>
</body>
</html>
